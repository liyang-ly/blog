<p>1、下载PHP7源码：</p><pre class="brush:bash;toolbar:false">wget&nbsp;
tar&nbsp;-zxv&nbsp;-f&nbsp;php-7.0.4.tar.gz</pre><p>2、安装依赖：</p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get update</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libxml2-dev</span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get &nbsp;install &nbsp;build-essential</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install openssl&nbsp;</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libssl-dev&nbsp;</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">apt-get install make</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">apt-get install curl</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">apt-get install libcurl4-gnutls-dev</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libjpeg-dev</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libpng-dev</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libmcrypt-dev</span><br style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">sudo apt-get install libreadline6 libreadline6-dev</span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">3、编译安装：<br/></span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">进入源码目录</span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">解压源码：</span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">tar -zxv -f php-7.0.4.tar.gz</span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">进入源码：</span></span></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">&nbsp;cd php-7.0.4/</span></span></p><p><span style="font-family:Microsoft YaHei, Verdana, sans-serif, SimSun"><span style="font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">备至编译项：</span></span></p><pre class="brush:bash;toolbar:false">./configure&nbsp;--prefix=/usr/local/php7&nbsp;\
--with-config-file-path=/usr/local/php7/etc&nbsp;\
--with-mcrypt=/usr/include&nbsp;\
--with-mysql=mysqlnd&nbsp;\
--with-mysqli=mysqlnd&nbsp;\
--with-pdo-mysql=mysqlnd&nbsp;\
--with-gd&nbsp;\--with-iconv&nbsp;\
--with-zlib&nbsp;\
--enable-xml&nbsp;\
--enable-bcmath&nbsp;\
--enable-shmop&nbsp;\
--enable-sysvsem&nbsp;\
--enable-inline-optimization&nbsp;\
--enable-mbregex&nbsp;\
--enable-fpm&nbsp;\
--enable-mbstring&nbsp;\
--enable-ftp&nbsp;\
--enable-gd-native-ttf&nbsp;\
--with-openssl&nbsp;\
--enable-pcntl&nbsp;\
--enable-sockets&nbsp;\
--with-xmlrpc&nbsp;\
--enable-zip&nbsp;\
--enable-soap&nbsp;\
--without-pear&nbsp;\
--with-gettext&nbsp;\
--enable-session&nbsp;\
--with-curl&nbsp;\
--with-jpeg-dir&nbsp;\
--with-freetype-dir&nbsp;\
--enable-opcache&nbsp;&nbsp;\
---with-apxs2=/usr/bin/apxs</pre><p>*这里php以apache模块方式启动，所以一定要指定：</p><pre class="brush:bash;toolbar:false">---with-apxs2=/usr/bin/apxs</pre><p>若whereis apxs找不到则安装apxs（<span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; background-color: rgb(255, 255, 255);">展模块的工具）：</span></p><pre class="brush:bash;toolbar:false">sudo&nbsp;apt-get&nbsp;install&nbsp;&nbsp;apache2-dev</pre><p>编译安装（安装时一定要有root权限）：</p><pre class="brush:bash;toolbar:false">&nbsp;make&nbsp;&amp;&amp;&nbsp;sudo&nbsp;make&nbsp;install</pre><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">完成后对编译进行检查：</span></span></p><pre class="brush:bash;toolbar:false">make&nbsp;test</pre><p>4、apache备置：<br/></p><p>更改apache的模式为prefork，将mpm_prefork.load和mpm_prefork.conf连接到/etc/apache2/mods-enabled下，去掉mpm_event.lod;</p><p>备置apache2.conf,加入：</p><pre class="brush:bash;toolbar:false">AddType&nbsp;application/x-httpd-php&nbsp;.php&nbsp;.php3&nbsp;.php4&nbsp;.html</pre><p></p><p>5、重启apache</p><pre class="brush:bash;toolbar:false">&nbsp;sudo&nbsp;service&nbsp;apache2&nbsp;restart</pre><p><br/></p><p><br/></p><p><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><br/></span></p>