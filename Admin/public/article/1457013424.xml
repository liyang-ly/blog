<p><span style="font-size: 18px;">1、vld查看opcode的实现机制：</span></p><p dir="ltr" style="text-indent: 0em;">&nbsp;&nbsp;&nbsp;<span style="font-size: 18px; color: rgb(79, 129, 189); background-color: rgb(255, 255, 255);">&nbsp;<span style="font-size: 16px; background-color: rgb(255, 255, 255);">vld扩展<span style="font-size: 16px; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);">利用PHP对扩展模块提供的请求初始化钩子函数，在每次请求到来是将php的编译函数指针<span style="font-size: 16px; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);">end_compile_file和执行函数指针zend_execute指向自己定义的vld_compile_file函数和vld_execute函数，这两个函数中，对原函数进行了封装，原编译函数能返回一个op_array的指针，所以在新的编译函数中可以截获这个op_array的指针，然后输出相关opcode信息</span></span></span><span style="font-size: 16px; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);">。</span><span style="font-size: 18px; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);"> &nbsp;</span></span></p><p dir="ltr" style="text-indent: 0em;"><span style="font-family: Arial; line-height: 26px; font-size: 18px; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">2、下载VLD扩展：<a href="http://pecl.php.net/package/vld" _src="http://pecl.php.net/package/vld">http://pecl.php.net/package/vld</a> </span></p><p dir="ltr" style="text-indent: 0em;">3、编译安装：</p><pre class="brush:bash;toolbar:false">tar&nbsp;-zxv&nbsp;-f&nbsp;vld-0.12.0.tgz&nbsp;
cd&nbsp;vld-0.12.0/
phpzie5
sudo&nbsp;./configure&nbsp;--with-php-config=/usr/bin/php-config5&nbsp;--enable-vld
sudo&nbsp;make&nbsp;&amp;&amp;&nbsp;sudo&nbsp;install
make&nbsp;test</pre><p dir="ltr" style="text-indent: 0em;">4、做个简单的测试：<br/></p><p dir="ltr" style="text-indent: 0em;"><span style="color: rgb(75, 172, 198);">在php.ini添加中添加：<span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);">extension=</span></span><wbr style="padding: 0px; margin: 0px; font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; white-space: normal; background-color: rgb(255, 255, 255);"/><span style="font-family: &#39;Microsoft YaHei&#39;, Verdana, sans-serif, SimSun; font-size: 14px; line-height: 22px; color: rgb(75, 172, 198); background-color: rgb(255, 255, 255);">vld.so</span></p>